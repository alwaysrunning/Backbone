<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="jquery.js"></script>
<script src="underscore.js"></script>
<script type="text/template" id="tpl">
  /* <% for (var i=0; i<list.length; i++) { %>
      <li><span><%=list[i].firstName%></span><span><%=list[i].lastName%></span><span><%=list[i].city%></span></li>
   <%}%>*/
   
   <% _.each(obj, function(list){ %>
	  <li><span><%=list.firstName%></span><span><%=list.lastName%></span><span><%=list.city%></span></li> 
   <%})%>
</script>
<script>
var obj = {name:'andy',age:'18'}
/* _.each(obj,function(ele,index){
    console.log(index +':'+ele)
})*/

/*var aa= _.map([1,2,4],function(num){
 	return num*3
 })

console.log(
    _.reduce([1, 2, 3], function (memo, num) {
        return memo + num;
    }, 0)
);

console.log(
_.filter([1,2,3,4,5,6],function(num){
	return num % 2 == 0
}))


var list = [
    {title:"AAA",year: 1982},
    {title:"BBB",year: 1900},
    {title:"CCC",year: 1982}
];

var where = _.where(list,{title:'AAA'})
console.log(where)*/

/*var a =  _.shuffle([1, 2, 3, 4, 5, 6]);


var b=_.every([2,4,6,7],function(num){
	return num % 2 ==0
})

var c = _.size([2,3,4]);

var d = _.find([1, 2, 3, 4, 6], function(num){ return num % 2 == 0; });

var stooges = [{name : 'moe', age : 40}, {name : 'larry', age : 50}, {name : 'curly', age : 60}];
_.pluck(stooges,'name')

var add = function(n1,n2,n3) {
    console.log(this.sum + n1 + n2 + n3);
};

_.bind(add,{sum:2},1,1,1)()

var fibonacci = _.memoize(function(n) {
    return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
});
_.defer(function(){ alert('deferred'); });*/

/*function updatePosition(){
	console.log(11111)
}

var throttled = _.throttle(updatePosition, 3000);

setInterval(updatePosition,1000)

//防止用户双击某个按钮
//$("button").on("click", _.debounce(submitForm, 1000, true));

//返回一个只能运行一次的新函数
var initialize = _.once(createApplication);
initialize();


var renderNotes = _.after(notes.length, render);
_.each(notes, function(note) {
  note.asyncSave({success: renderNotes});
});


console.log(throttled)*/


/*var stooges = [{name : 'curly', age : 25}, {name : 'moe', age : 21}, {name : 'larry', age : 23}];
var youngest = _.chain(stooges)
    .sortBy(function(stooge){ return stooge.age; })
    .map(function(stooge){ return stooge.name + ' is ' + stooge.age; })
    .first()
    .value();
console.log(youngest);*/

/*var users = [
    {name: 'moe', age: 40},
    {name: 'larry', age: 50}
];

console.log( _.pluck(users,'name'))

console.log(_.min(users,function(num){
    return num.age
}))

var numbers = [10, 5, 100, 2, 1000];
console.log( _.size(users))

console.log(_.intersection([1, 2, 3], [101, 2, 1, 10], [2, 1]));


console.log(
    _.object(['moe', 'larry', 'curly'], [30, 40, 50])
);

var e = _.object(['moe', 'larry', 'curly'], [30, 40, 50])
console.log(
    _.toArray(e)
);*/


/*var add = function(argument){ return argument + this.name}
console.log(_.bind(add,{name:'andy'},'hi ')())
console.log(add.call({name:'loading'},'hi '))

var stooges = [{name : 'curly', age : 25}, {name : 'moe', age : 21}, {name : 'larry', age : 23}]
var aa = _.chain(stooges).sortBy(function(num){ return num.age}).map(function(num){ return num.name +'is'+ num.age}).first().value()
console.log(aa)*/

/*var jsData = [1,23]

var underscoreData = _(jsData)

console.log(_(jsData).value())


var arr = [10, 20, 30];  
var bb = _(arr)  
    .chain()  
    .map(function(item){ return item++; })  
    .first()  
    .value()
console.log(bb)	*/

/*var arr = [1, 2, 3];  
 
_(arr).map(function(item, i) {  
    arr[i] = item + 1;  
});

_.each(arr,function(item, i){
    arr[i] = item + 1
})*/

$(function(){
  var data = {  
        list: [  
            {firstName: '<a href="#">Zhang</a>', lastName: 'San', city: 'Shanghai'},  
            {firstName: 'Li', lastName: 'Si', city: '<a href="#">Beijing</a>'},  
            {firstName: 'Wang', lastName: 'Wu', city: 'Guangzhou'},  
            {firstName: 'Zhao', lastName: 'Liu', city: 'Shenzhen'}  
        ]  
    }
  var tpl = $("#tpl").html()
 /* var html = _.template('<% for (var i=0; i<list.length; i++) { %><li><span><%=list[i].firstName%></span><span><%=list[i].lastName%></span><span><%=list[i].city%></span></li><%}%>')({list:data.list})*/
  
  /*var html = _.template('<% _.each(obj, function(list){ %>	<li><span><%=list.firstName%></span><span><%=list.lastName%></span><span><%=list.city%></span></li><%})%>')({obj:data.list})*/
  var html = template('<% _.each(obj, function(list){ %>	<li><span><%=list.firstName%></span><span><%=list.lastName%></span><span><%=list.city%></span></li><%})%>',{obj:data.list})
  $('#element').html(html)
})

function template(tpl,obj){
   return _.template(tpl)(obj)
} 


	  
</script>
<title>underscore</title>
</head>

<body>
<ul id="element"></ul>
</body>
</html>
